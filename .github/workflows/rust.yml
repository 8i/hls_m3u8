name: rust

# Trigger the workflow on push or pull request
on: [push, pull_request]

jobs:
    ci:
        runs-on: ubuntu-latest

        strategy:
            matrix:
                rust:
                    - stable
                    - beta
                    - nightly

        steps:
            - uses: actions/checkout@v2
            - uses: actions-rs/toolchain@v1
                with:
                    profile: minimal
                    toolchain: ${{ matrix.rust }}
                    override: true
                    components: rustfmt, clippy

            - uses: actions-rs/cargo@v1
                with:
                    command: build
                    args: --all-features

            - uses: actions-rs/cargo@v1
                with:
                    command: test
                    args: --all-features

            - uses: actions-rs/cargo@v1
                with:
                    command: doc
                    args: --all-features

            - uses: actions-rs/cargo@v1
                with:
                    command: fmt
                    args: --all -- --check
